name: dino_wm
channels:
  - pytorch
  - nvidia
  - conda-forge

dependencies:
  - python=3.10

  # --- PyTorch ---
  - pytorch=2.3.0
  - torchvision=0.18.0
  - pytorch-cuda=12.1

  # --- Core scientific stack ---
  - numpy
  - pillow
  - matplotlib
  - imageio
  - tqdm
  - psutil
  - ffmpeg

  # --- Heavy packages moved to conda (stable) ---
  - pygame
  - pymunk
  - shapely
  - opencv
  - scikit-image
  - pyyaml

  # --- mujoco_py build/runtime deps (avoid apt; conda-forge approach) ---
  - mesalib
  - glew
  - glfw
  - patchelf
  - cmake
  - swig
  - libgl
  - libgl-devel

  # pip needed for other Python-only packages
  - pip

  - pip:
      # Core training
      - accelerate
      - einops
      - hydra-submitit-launcher

      # Config system
      - hydra-core
      - omegaconf

      # Logging
      - wandb
      - umap-learn

      # Planning
      - gym==0.23.1
      - submitit
      - "d4rl==1.1"

      # Video IO
      - imageio-ffmpeg
      - cloudpickle

      # Dataset loaders
      - decord

      # --- mujoco_py (legacy gym mujoco backend) ---
      - "cython<3"
      - "mujoco-py==2.1.2.14"
      - PyOpenGL
      - glfw